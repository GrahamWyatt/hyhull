h1. Hydra at Hull (Community edition)

Hydra project at the University of Hull.  This is the hyhull repo based upon the latest the hydra software, for more information about the Hydra project see:-

hydra project site: "http://projecthydra.org/":http://projecthydra.org/
hydra gem: "https://github.com/projecthydra/hydra":https://github.com/projecthydra/hydra
hydra-head gem: "https://github.com/projecthydra/hydra-head":https://github.com/projecthydra/hydra-head 

The hyhull community version aims to provide a version of the application that is easier to setup and configure.   This includes a number of changes from the original version of hyhull, but most notably, the use of simple DB authentication. 

h2. Code Status

!https://travis-ci.org/uohull/hyhull.png?branch=master!:https://travis-ci.org/uohull/hyhull

h2. Installation/Setup

h3. Installation Prerequisites

To clone the community branch of hyhull

<pre>
git clone -b community --single-branch https://github.com/uohull/hyhull 
</pre>

Change the current directory to "hyhull"

Install hydra-jetty. Note, jetty has been added to hyhull as a git submodule (this may take several minutes):
<pre>git submodule init
git submodule update
</pre>

Install the dependencies by running:
<pre>bundle install
</pre>

*The database*

Migrate the database
<pre>rake db:migrate</pre>

Seed the database with the pre-defined development/test Users and Repo roles (contentAccessTeam, staff, student etc..).

*Note*:  The seeds process will create the following users/passwords.  This will enable you to test various roles within Hyhull, and get a flavour of how authentication/authorisation provides differentiated access.

<pre>email: 'cat@hyhull.com', password: 'cat123' (ContentAccessTeam role)
email: 'creator@hyhull.com', password: 'creator123' (ContentCreator role)
email: 'admin@hyhull.com', password: 'admin123' (Admin role)
email: 'staff@hyhull.com', password: 'staff123' (Staff role)
email: 'student@hyhull.com', password: 'student123' (Student role)
</pre>

To seed the data...       
<pre>rake db:seed</pre>

*Jetty*

Configure jetty:
<pre>rake hydra:jetty:config
</pre>

hyhull includes full text indexing.  The necessary solr libraries are not included with Jetty as default, copy to solr using:
<pre>rake hyhull:config:solr_text_extraction</pre>

hyhull also makes use of the saxon xslt processor (generally bundled with fedora-commons) to generate metadata different schemas from the mods source metadata. To include the required war and context file, use:
<pre>rake hyhull:config:saxon_xslt_engine</pre>

Then start jetty:
<pre>rake jetty:start
</pre>

Load some sample data:
<pre>rake hyhull:default_fixtures:refresh
</pre>

Start the webserver
<pre>rails s
</pre>

You should now be able to see the application at: http://localhost:3000/

h3. Testing

The quickest way to test is to run this task
<pre>rake hyhull:test
</pre>

If you prefer a more manual approach, start by loading fixtures:

Migrate and seed the database
<pre>RAILS_ENV=test rake db:migrate
RAILS_ENV=test rake db:seed
</pre>

Then you can run specs:
<pre>rake spec
</pre>

And cucumber features:
<pre>rake cucumber:ok
</pre>